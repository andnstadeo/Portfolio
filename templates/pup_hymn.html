<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUP Hymn</title>
    <link rel="stylesheet" href="../static/pup_hymn.css" />
</head>
<body>
    <div class="header">
        <img src="../image/PUPLogo.png" alt="The PUP logo">
        POLYTECHNIC UNIVERSITY OF THE PHILIPPINES
    </div>

    <div class="container">
        <h2 class="title">PUP HYMN</h2> 
        <div class="lyrics-container">
            <div class="lyrics">
                <p id="line1">Sintang Paaralan</p>
                <p id="line2">Tanglaw ka ng bayan</p>
                <p id="line3">Pandayan ng isip ng kabataan</p>
                <p id="line4">Kami ay dumating nang salat sa yaman</p>
                <p id="line5">Hanap na dunong ay iyong alay</p>
                <p id="line6">Ang layunin mong makatao</p>
                <p id="line7">Dinarangal ang Pilipino</p>
                <p id="line8">Ang iyong aral, diwa, adhikang taglay</p>
                <p id="line9">PUP, aming gabay</p>
                <p id="line10">Paaralang dakila</p>
                <p id="line11">PUP, pinagpala</p>
                <p id="line12">Gagamitin ang karunungan</p>
                <p id="line13">Mula sa iyo, para sa bayan</p>
                <p id="line14">Ang iyong aral, diwa, adhikang taglay</p>
                <p id="line15">PUP, aming gabay</p>
                <p id="line16">Paaralang dakila</p>
                <p id="line17">PUP, pinagpala</p>
            </div>
        </div>
        <audio id="hymn" controls autoplay>
            <source src="../image/PUP HYMN.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>

    <div class="footer">
        Copyright &copy; 2025 Polytechnic University of the Philippines
    </div>

    <script>
        const lyrics = [
        { time: 13, line: "line1" },
        { time: 15, line: "line2" },
        { time: 18.5, line: "line3" },
        { time: 24, line: "line4" },
        { time: 29, line: "line5" },
        { time: 35, line: "line6" },
        { time: 41, line: "line7" },
        { time: 48, line: "line8" },
        { time: 53, line: "line9" },
        { time: 56, line: "line10" },
        { time: 63, line: "line11" },
        { time: 68, line: "line12" },
        { time: 74, line: "line13" },
        { time: 80, line: "line14" },
        { time: 86, line: "line15" },
        { time: 89, line: "line16" },
        { time: 95, line: "line17" }
    ];

    const audio = document.getElementById("hymn");
    const lyricsContainer = document.querySelector(".lyrics");
    const lyricsWrapper = document.querySelector(".lyrics-container");
    let currentIndex = 0;

    audio.addEventListener("timeupdate", function () {
        if (currentIndex < lyrics.length && audio.currentTime >= lyrics[currentIndex].time) {
            document.querySelectorAll(".lyrics p").forEach(p => p.classList.remove("active"));

            const activeLine = document.getElementById(lyrics[currentIndex].line);
            activeLine.classList.add("active");
            const wrapperHeight = lyricsWrapper.clientHeight;
            const lineHeight = activeLine.clientHeight;
            const activeLineOffset = activeLine.offsetTop;
            const centerOffset = activeLineOffset - wrapperHeight / 2 + lineHeight / 2;

            lyricsContainer.style.transform = `translateY(-${centerOffset}px)`;

            currentIndex++;
        }
    });

    audio.addEventListener("ended", function () {
        audio.currentTime = 0;
        currentIndex = 0;
        document.querySelectorAll(".lyrics p").forEach(p => p.classList.remove("active"));
        lyricsContainer.style.transform = "translateY(0px)";
    });

    audio.addEventListener("play", function () {
        if (audio.currentTime === 0) {
            currentIndex = 0;
            document.querySelectorAll(".lyrics p").forEach(p => p.classList.remove("active"));
            lyricsContainer.style.transform = "translateY(0px)";
        }
    });
    </script>
</body>
</html>
